<!--
Copyright (C) 2014 Google Inc. All Rights Reserved.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.4.6/css/foundation.css"/>
        <link rel="stylesheet" href="css/styles.css">
        <title>OpsReceiver</title>
    </head>
    <body data-ng-app="app" data-ng-controller="unitsController as units">
        <div class="container">
            <div class="row">
                <div class="small-12 medium-8 columns">

                    <!--<h2>{{units.data}}</h2>-->
                    <!--<button class="button small" ng-click="units.data[1].active = true">Select second tab</button>-->

                    <tabset>
                        <tab data-ng-repeat="unit in units.data" heading="{{unit.name}}">
                            <h2>{{unit.id}}</h2>
                            <h2>{{unit.marker}}</h2>

                            <!--<canvas width="800" height="450" id="jsmpegCanvas">Get better browser dude</canvas>-->

                        </tab>
                    </tabset>
                </div>

                <div class="small 12 medium-4 columns">

                    <!-- map -->
                    <div class="flex-video">
                        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d64925.23750635577!2d10.670886939453114!3d59.43451433119259!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x46414da481602389%3A0x49a5957ac3b5d6e4!2zSmVsw7h5YSwgTW9zcw!5e0!3m2!1sen!2sno!4v1414250711903" width="800" height="600" frameborder="0" style="border:0"></iframe>
                    </div>


                    <h2>Ressurser</h2>
                    <ul>
                        <li><a href="#">Buskerud politi</a></li>
                        <li><a href="#"></a>AB Politi</li>
                        <li><a href="#"></a>Ambulanse Skui</li>
                        <li><a href="#"></a>Ambulanse somewhere</li>
                        <li><div id="message">Message?</div></li>
                    </ul>

                    <!-- QR Code -->
                    <div class="row">
                        <div class="small-6 columns">
                            <img src="http://qrfree.kaywa.com/?l=1&s=8&d=http%3A%2F%2Fnanopils.servebeer.com%3A18888%2Fjeloy%2F" alt="QRCode"/>
                        </div>
                    </div>
                </div>
            </div>
        </div>



        <!-- other scripts -->
        <script type="text/javascript" src="//www.gstatic.com/cast/sdk/libs/receiver/2.0.0/cast_receiver.js"></script>
        <script type="text/javascript" src="js/castCommunication.js"></script>
        <!--<script type="text/javascript" src="js/datahubCommunication.js"></script>-->
        <!--<script type="text/javascript" src="js/jsmpg.js"></script>-->
        <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
        <script type="text/javascript">



            // video stream:
            /*var canvas = document.getElementById('jsmpegCanvas');
            var player = new jsmpeg('http://192.168.1.251', {canvas:canvas, autoplay:true, loop: false});
            canvas.addEventListener('click', function(){
                if(player.playing) { player.pause(); } else { player.play(); }
            }, false);*/



            // utility function to display the text message in the input field
            function displayText(text) {
                console.log(text);
                document.getElementById("message").innerHTML=text;
                window.castReceiverManager.setApplicationState(text);
            }

            window.onload = function() {
                setupCastCommunication();
                // setupDataHubCommunication();
            };
        </script>

        <!-- angular -->
        <script src="js/angular.js"></script>
        <script src="js/mm-foundation-tpls.js"></script>
        <script src="js/app.js"></script>
        <script src="js/controllers/units-controller.js"></script>

    </body>
</html>